/*
evaler.js v0.5d http://opensourcetaekwondo.com/evaler/
(c) 2014-2015 Nick Campbell cjsssdev@gmail.com
License: MIT
*/
(function(e,t,n,r,i,s){"use strict";var o="evaler",u={is:{fn:function(e){return Object.prototype.toString.call(e)==="[object Function]"},obj:function(e){return e&&e===Object(e)&&!u.is.fn(e)},arr:function(e){return Object.prototype.toString.call(e)==="[object Array]"}},newID:function(e){var t;e=e||o;do{t=Math.floor(Math.random()*1e3)}while(document.getElementById(e+t));return e+t}};e[o]=n(e,t,u,r,i,s)})(window,document,function(e,t,n,r,i,s){"use strict";function a(e){var t="try{"+"return(function(g,Object){"+"return((1,eval)('Object')===g"+"?function(){return(1,eval)(arguments[0]);}"+":(window.execScript?function(){return window.execScript(arguments[0]);}:undefined)"+");"+"})(Object,{});"+"}catch(e){return undefined;}";if(e){return t}else if(u===null){u=(new Function(t))()}}function f(e,t,r){return function(i,s,o){var u,a=n.is.arr(i),f={js:a?i:[i],results:[],errors:[]};if(t&&n.is.obj(s)){for(u in s){if(s.hasOwnProperty(u)){t[u]=t[u]||s[u]}}}for(u=0;u<f.js.length;u++){try{f.results.push(r?e.call(t,f.js[u]):e(f.js[u]))}catch(l){f.results.push(undefined);f.errors.push({index:u,error:l})}}return o?f:a?f.results:f.results[0]}}function l(s,c,h){var p,d=c!==undefined&&c!==null;c=d?c:e;switch(s){case"g":{if(c===e){a();p=!u&&h.f?r:u;if(p){return f(p,e)}}else if(n.is.fn(c.eval)){p=c.eval("function(){"+a(true)+"}()");p=!p&&h.f?function(){return c.eval(arguments[0])}:p;if(p){return h.r?p:f(p,c)}}break};case"l":{return f(r,c,d)};case"u":{return f(i,c,d)};case"i":{h=n.is.obj(h)?h:{};h.id=n.newId("psandbox");(t.body||t.head||t.getElementsByTagName("head")[0]).insertAdjacentHTML("afterbegin",'<iframe id="'+h.id+'" style="display:none;" sandbox="allow-scripts allow-same-origin"></iframe>');h.iframe=t.getElementById(h.id);h.window=h.iframe.contentWindow;p=l("g",h.window,{f:1,r:1});return f(p,c||h.window,d)};case"j":{return f(o)}}}var o,u=null;if(e.JSON&&e.JSON.parse){o=e.JSON.parse}else if(e.jQuery&&e.jQuery.parseJSON){o=e.jQuery.parseJSON}return{global:function(t,n){return l("g",n||e,{f:t})},local:function(e){return l("l",e)},useStrict:function(e){return l("u",e)},isolated:function(e,t){return l("i",e,t)},json:!o?undefined:function(){return l("j")},sandbox:!s?undefined:s(e,t,n,f)}},function(){return eval(arguments[0])},function(){"use strict";return eval(arguments[0])},function(e,t,n,r){"use strict";function u(t,r,u,a){if(!s){s=true;e.addEventListener=e.addEventListener||function(t,n){e.attachEvent("on"+t,n)};e.addEventListener("message",function(e){if(e.origin==="null"&&i[e.data.id]){i[e.data.id](e.source,{results:e.data.r,errors:e.data.e,js:e.data.js},e.data.arg);delete i[e.data.id]}},false)}return function(e,s,u){var f=n.is.arr(e);return{then:function(n,l){i[o]=function(e,t,r){if(e===a){n(u?t:f?t.results:t.results[0],r)}};a.postMessage({js:f?e:[e],id:o++,arg:l,type:t,context:r,inject:s},"*")}}}}var i=[],s=false,o=0;return function(i){var s,o,a,f={id:n.newId("sandbox")};i=i===null?"":' sandbox="'+(i?i:"allow-scripts")+'"';a=i.indexOf("allow-same-origin")===-1&&e.postMessage;s=a?u:r;(t.body||t.head||t.getElementsByTagName("head")[0]).insertAdjacentHTML("afterbegin",'<iframe src="" id="'+f.id+'" style="display:none;"'+i+"></iframe>");f.iframe=t.getElementById(f.id);f.window=o=f.iframe.contentWindow;f.isSecure=s===u;f.global=function(e){var t=e?"isolated":"global";return s(a?t:o.$sandbox[t],o)};f.local=function(e){var t=arguments.length===1,n=t?"context":"local";return s(a?n:o.$sandbox[n],e||o,t,o)};return f}})
